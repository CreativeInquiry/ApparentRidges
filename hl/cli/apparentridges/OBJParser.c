// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <apparentridges/OBJParser.h>
String sys_io_File_getContent(String);
apparentridges__Mesh apparentridges_OBJParser_fromString(String);
#include <hl/types/ArrayObj.h>
#include <hl/types/ArrayBytes_Float.h>
#include <hl/types/ArrayBytes_Int.h>
extern hl_type t$apparentridges_Mesh;
void apparentridges_Mesh_new(apparentridges__Mesh);
extern hl_type t$hl_types_ArrayBytes_Float;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$hl_types_ArrayBytes_Int;
extern String s$68b329d;
hl__types__ArrayObj String_split(String,String);
String StringTools_trim(String);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
String String_charAt(String,int);
extern String s$01abfc7;
int String___compare(String,vdynamic*);
extern String s$7215ee9;
extern String s$v;
double Std_parseFloat(String);
hl__types__ArrayBytes_Float hl_types_ArrayBase_allocF64(vbyte*,int);
extern hl_type t$_dyn;
void hl_types_ArrayBytes_Float___expand(hl__types__ArrayBytes_Float,int);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern String s$f;
extern String s$6666cd7;
vdynamic* Std_parseInt(String);
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$_i32;
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);

apparentridges__Mesh apparentridges_OBJParser_fromFile(String r0) {
	String r2;
	apparentridges__Mesh r1;
	r2 = sys_io_File_getContent(r0);
	r1 = apparentridges_OBJParser_fromString(r2);
	return r1;
}

apparentridges__Mesh apparentridges_OBJParser_fromString(String r0) {
	String r7, r8, r17;
	hl__types__ArrayObj r3, r10, r13;
	hl_type *r5;
	hl__types__ArrayBytes_Int r26;
	apparentridges__Mesh r1;
	hl__types__ArrayBytes_Float r21;
	double r18, r19, r20, r23;
	vdynamic *r16, *r24;
	vbyte *r22;
	int r6, r9, r11, r12, r14, r15, r25, r27, r28, r29;
	varray *r4;
	r1 = (apparentridges__Mesh)hl_alloc_obj(&t$apparentridges_Mesh);
	apparentridges_Mesh_new(r1);
	r5 = &t$hl_types_ArrayBytes_Float;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r1->vertices = r3;
	r5 = &t$hl_types_ArrayBytes_Int;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r1->faces = r3;
	if( r0 == NULL ) hl_null_access();
	r8 = (String)s$68b329d;
	r3 = String_split(r0,r8);
	r6 = 0;
	if( r3 == NULL ) hl_null_access();
	r9 = r3->length;
	label$2bbb79a_2_18:
	if( r6 >= r9 ) goto label$2bbb79a_2_288;
	r11 = r6;
	++r6;
	if( r3 == NULL ) hl_null_access();
	r15 = r3->length;
	if( ((unsigned)r11) < ((unsigned)r15) ) goto label$2bbb79a_2_27;
	r7 = NULL;
	goto label$2bbb79a_2_30;
	label$2bbb79a_2_27:
	r4 = r3->array;
	r16 = ((vdynamic**)(r4 + 1))[r11];
	r7 = (String)r16;
	label$2bbb79a_2_30:
	r7 = StringTools_trim(r7);
	r14 = r3->length;
	if( ((unsigned)r11) < ((unsigned)r14) ) goto label$2bbb79a_2_34;
	hl_types_ArrayObj___expand(r3,r11);
	label$2bbb79a_2_34:
	r4 = r3->array;
	((String*)(r4 + 1))[r11] = r7;
	r14 = r3->length;
	if( ((unsigned)r11) < ((unsigned)r14) ) goto label$2bbb79a_2_40;
	r7 = NULL;
	goto label$2bbb79a_2_43;
	label$2bbb79a_2_40:
	r4 = r3->array;
	r16 = ((vdynamic**)(r4 + 1))[r11];
	r7 = (String)r16;
	label$2bbb79a_2_43:
	if( r7 == NULL ) hl_null_access();
	r12 = 0;
	r7 = String_charAt(r7,r12);
	r8 = (String)s$01abfc7;
	if( r7 != r8 && (!r7 || !r8 || String___compare(r7,(vdynamic*)r8) != 0) ) goto label$2bbb79a_2_49;
	goto label$2bbb79a_2_18;
	label$2bbb79a_2_49:
	r14 = r3->length;
	if( ((unsigned)r11) < ((unsigned)r14) ) goto label$2bbb79a_2_53;
	r7 = NULL;
	goto label$2bbb79a_2_56;
	label$2bbb79a_2_53:
	r4 = r3->array;
	r16 = ((vdynamic**)(r4 + 1))[r11];
	r7 = (String)r16;
	label$2bbb79a_2_56:
	if( r7 == NULL ) hl_null_access();
	r12 = r7->length;
	r14 = 2;
	if( r14 < r12 ) goto label$2bbb79a_2_61;
	goto label$2bbb79a_2_18;
	label$2bbb79a_2_61:
	r14 = r3->length;
	if( ((unsigned)r11) < ((unsigned)r14) ) goto label$2bbb79a_2_65;
	r7 = NULL;
	goto label$2bbb79a_2_68;
	label$2bbb79a_2_65:
	r4 = r3->array;
	r16 = ((vdynamic**)(r4 + 1))[r11];
	r7 = (String)r16;
	label$2bbb79a_2_68:
	if( r7 == NULL ) hl_null_access();
	r8 = (String)s$7215ee9;
	r10 = String_split(r7,r8);
	if( r10 == NULL ) hl_null_access();
	r12 = 0;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_77;
	r7 = NULL;
	goto label$2bbb79a_2_80;
	label$2bbb79a_2_77:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r7 = (String)r16;
	label$2bbb79a_2_80:
	r17 = (String)s$v;
	if( r7 != r17 && (!r7 || !r17 || String___compare(r7,(vdynamic*)r17) != 0) ) goto label$2bbb79a_2_154;
	r12 = 1;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_87;
	r8 = NULL;
	goto label$2bbb79a_2_90;
	label$2bbb79a_2_87:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r8 = (String)r16;
	label$2bbb79a_2_90:
	r18 = Std_parseFloat(r8);
	r12 = 2;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_96;
	r8 = NULL;
	goto label$2bbb79a_2_99;
	label$2bbb79a_2_96:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r8 = (String)r16;
	label$2bbb79a_2_99:
	r19 = Std_parseFloat(r8);
	r12 = 3;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_105;
	r8 = NULL;
	goto label$2bbb79a_2_108;
	label$2bbb79a_2_105:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r8 = (String)r16;
	label$2bbb79a_2_108:
	r20 = Std_parseFloat(r8);
	r12 = 0;
	r22 = hl_alloc_bytes(r12);
	r12 = 0;
	r12 = 0;
	r21 = hl_types_ArrayBase_allocF64(r22,r12);
	if( r21 == NULL ) hl_null_access();
	r12 = 2;
	r16 = NULL;
	r23 = (double)hl_dyn_castd(&r16,&t$_dyn);
	r14 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_121;
	hl_types_ArrayBytes_Float___expand(r21,r12);
	label$2bbb79a_2_121:
	r22 = r21->bytes;
	r14 = 3;
	r14 = r12 << r14;
	*(double*)(r22 + r14) = r23;
	r12 = 0;
	r14 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_129;
	hl_types_ArrayBytes_Float___expand(r21,r12);
	label$2bbb79a_2_129:
	r22 = r21->bytes;
	r14 = 3;
	r14 = r12 << r14;
	*(double*)(r22 + r14) = r18;
	r12 = 1;
	r14 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_137;
	hl_types_ArrayBytes_Float___expand(r21,r12);
	label$2bbb79a_2_137:
	r22 = r21->bytes;
	r14 = 3;
	r14 = r12 << r14;
	*(double*)(r22 + r14) = r19;
	r12 = 2;
	r14 = r21->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_145;
	hl_types_ArrayBytes_Float___expand(r21,r12);
	label$2bbb79a_2_145:
	r22 = r21->bytes;
	r14 = 3;
	r14 = r12 << r14;
	*(double*)(r22 + r14) = r20;
	if( r1 == NULL ) hl_null_access();
	r13 = r1->vertices;
	if( r13 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r13,((vdynamic*)r21));
	goto label$2bbb79a_2_287;
	label$2bbb79a_2_154:
	r17 = (String)s$f;
	if( r7 != r17 && (!r7 || !r17 || String___compare(r7,(vdynamic*)r17) != 0) ) goto label$2bbb79a_2_287;
	r12 = 1;
	r14 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_161;
	r8 = NULL;
	goto label$2bbb79a_2_164;
	label$2bbb79a_2_161:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r8 = (String)r16;
	label$2bbb79a_2_164:
	if( r8 == NULL ) hl_null_access();
	r17 = (String)s$6666cd7;
	r13 = String_split(r8,r17);
	if( r13 == NULL ) hl_null_access();
	r12 = 0;
	r14 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$2bbb79a_2_173;
	r8 = NULL;
	goto label$2bbb79a_2_176;
	label$2bbb79a_2_173:
	r4 = r13->array;
	r16 = ((vdynamic**)(r4 + 1))[r12];
	r8 = (String)r16;
	label$2bbb79a_2_176:
	r24 = Std_parseInt(r8);
	r12 = r24 ? r24->v.i : 0;
	r14 = 2;
	r15 = r10->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$2bbb79a_2_183;
	r8 = NULL;
	goto label$2bbb79a_2_186;
	label$2bbb79a_2_183:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r14];
	r8 = (String)r16;
	label$2bbb79a_2_186:
	if( r8 == NULL ) hl_null_access();
	r17 = (String)s$6666cd7;
	r13 = String_split(r8,r17);
	if( r13 == NULL ) hl_null_access();
	r14 = 0;
	r15 = r13->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$2bbb79a_2_195;
	r8 = NULL;
	goto label$2bbb79a_2_198;
	label$2bbb79a_2_195:
	r4 = r13->array;
	r16 = ((vdynamic**)(r4 + 1))[r14];
	r8 = (String)r16;
	label$2bbb79a_2_198:
	r24 = Std_parseInt(r8);
	r14 = r24 ? r24->v.i : 0;
	r15 = 3;
	r25 = r10->length;
	if( ((unsigned)r15) < ((unsigned)r25) ) goto label$2bbb79a_2_205;
	r8 = NULL;
	goto label$2bbb79a_2_208;
	label$2bbb79a_2_205:
	r4 = r10->array;
	r16 = ((vdynamic**)(r4 + 1))[r15];
	r8 = (String)r16;
	label$2bbb79a_2_208:
	if( r8 == NULL ) hl_null_access();
	r17 = (String)s$6666cd7;
	r13 = String_split(r8,r17);
	if( r13 == NULL ) hl_null_access();
	r15 = 0;
	r25 = r13->length;
	if( ((unsigned)r15) < ((unsigned)r25) ) goto label$2bbb79a_2_217;
	r8 = NULL;
	goto label$2bbb79a_2_220;
	label$2bbb79a_2_217:
	r4 = r13->array;
	r16 = ((vdynamic**)(r4 + 1))[r15];
	r8 = (String)r16;
	label$2bbb79a_2_220:
	r24 = Std_parseInt(r8);
	r15 = r24 ? r24->v.i : 0;
	if( r1 == NULL ) hl_null_access();
	r13 = r1->vertices;
	if( r13 == NULL ) hl_null_access();
	r25 = r13->length;
	r27 = 0;
	r22 = hl_alloc_bytes(r27);
	r27 = 0;
	r27 = 0;
	r26 = hl_types_ArrayBase_allocI32(r22,r27);
	if( r26 == NULL ) hl_null_access();
	r27 = 2;
	r16 = NULL;
	r28 = (int)hl_dyn_casti(&r16,&t$_dyn,&t$_i32);
	r29 = r26->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2bbb79a_2_238;
	hl_types_ArrayBytes_Int___expand(r26,r27);
	label$2bbb79a_2_238:
	r22 = r26->bytes;
	r29 = 2;
	r29 = r27 << r29;
	*(int*)(r22 + r29) = r28;
	r27 = 0;
	r29 = 0;
	if( r12 >= r29 ) goto label$2bbb79a_2_247;
	r28 = r25 + r12;
	goto label$2bbb79a_2_249;
	label$2bbb79a_2_247:
	r29 = 1;
	r28 = r12 - r29;
	label$2bbb79a_2_249:
	r29 = r26->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2bbb79a_2_252;
	hl_types_ArrayBytes_Int___expand(r26,r27);
	label$2bbb79a_2_252:
	r22 = r26->bytes;
	r29 = 2;
	r29 = r27 << r29;
	*(int*)(r22 + r29) = r28;
	r27 = 1;
	r29 = 0;
	if( r14 >= r29 ) goto label$2bbb79a_2_261;
	r28 = r25 + r14;
	goto label$2bbb79a_2_263;
	label$2bbb79a_2_261:
	r29 = 1;
	r28 = r14 - r29;
	label$2bbb79a_2_263:
	r29 = r26->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2bbb79a_2_266;
	hl_types_ArrayBytes_Int___expand(r26,r27);
	label$2bbb79a_2_266:
	r22 = r26->bytes;
	r29 = 2;
	r29 = r27 << r29;
	*(int*)(r22 + r29) = r28;
	r27 = 2;
	r29 = 0;
	if( r15 >= r29 ) goto label$2bbb79a_2_275;
	r28 = r25 + r15;
	goto label$2bbb79a_2_277;
	label$2bbb79a_2_275:
	r29 = 1;
	r28 = r15 - r29;
	label$2bbb79a_2_277:
	r29 = r26->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$2bbb79a_2_280;
	hl_types_ArrayBytes_Int___expand(r26,r27);
	label$2bbb79a_2_280:
	r22 = r26->bytes;
	r29 = 2;
	r29 = r27 << r29;
	*(int*)(r22 + r29) = r28;
	r13 = r1->faces;
	if( r13 == NULL ) hl_null_access();
	r27 = hl_types_ArrayObj_push(r13,((vdynamic*)r26));
	label$2bbb79a_2_287:
	goto label$2bbb79a_2_18;
	label$2bbb79a_2_288:
	return r1;
}

